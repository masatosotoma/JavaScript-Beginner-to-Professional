<!DOCTYPE html>
<html>
  <head>
    <title>JavaScript Course</title>
    <style>
      .hide {
        display: none;
      }
      .error {
        color: red;
        font-size: 0.8em;
        font-family: sans-serif;
        font-style: italic;
      }
      input {
        border-color: #ddd;
        width: 400px;
        display: block;
        font-size: 1.5em;
      }
    </style>
  </head>
  <body>
    <form name="myform">
      <input type="text" name="email" /> <span class="error hide"></span><br />
      <input type="password" name="password" />
      <span class="error hide"></span> <br />
      <input type="text" name="userName" />
      <span class="error hide"></span>
      <br />
      <input type="submit" value="Sign Up" />
    </form>
    <script>
      /*select all the page elements and set them as JavaScript objects so they are easier to select within the code.*/

      let myForm = document.querySelector("form");
      let input = document.querySelectorAll("input");
      //Also select all the page elements that have the error class as an object.
      let error = document.querySelectorAll(".error");
      let require = ["email", "userName"];

      //Add an event listener to submit and capture the click, preventing the default form action.
      myForm.addEventListener("submit", captureClick);

      function captureClick(e) {
        let date = {};
        e.preventDefault();

        /*Loop through all the page elements that have a class error and add the hide class, 
      which will remove them from view since this is a new submission.*/
        error.forEach((e) => {
          e.classList.add(".hide");
        });
        
        //Using the regular expression for valid emails, test the results against the input value of the email field.
        if (tempName == "email") {
          let exp = /([A-Za-z0-9._-]+@[A-Za-z0-9._-]+\.      [A-Za-z0-9]+)\w+/;
          let result = exp.test(el.value);
          if (!result) {
            addError(el, "Invalid Email", tempName);
            error = true;
          }
        }
        /*If there is an error that an input does not match the desired regex, 
            pass the parameters to the error handling function you just created.*/
        if (el.value.length == 0 && require.includes(tempName))
          /*Create a function to respond to errors, 
        which removes the hide class from the element next to the element that triggered the event. 
        Apply focus to that element within the function*/
          function respondError(el, message, fieldName) {
            let temp = el.nextElementSibling;
            temp.classList.remove("hide");
            el.focus();
          }
      }
    </script>
  </body>
</html>
