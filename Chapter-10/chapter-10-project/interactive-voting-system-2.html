<!DOCTYPE html>
<html>
  <head>
    <title>Intractive Voting System</title>
  </head>
  <body>
    <div id="message">Complete JavaScript Course</div>
    <div>
      <input type="text" id="addFriend" />
      <input type="button" id="addNew" value="Add Friend" />
    </div>
    <table id="output"></table>
    <script>
      /*Create an array of people's names called myArray.
              This will be the default original list of names.*/
      let myArray = [];

      //Select the page elements as JavaScript objects so they can easily be selected within the code.
      let message = document.getElementById("message");
      let output = document.getElementById("output");

      /*Add event listener to the Add Friend button.
              Once clicked, this will get the value from the input field and pass the values to a function
              that will add the friend list to the page.
              Additionally, add the new friend's name into the people's names array you created.
              Get the current value in the input field and
              push that value into the array so the array matches the values on the page.*/

      document.getElementById("addNew").onclick = () => {
        let text = document.getElementById("addFriend").value;
        myArray.push(text);
        console.log(myArray);
        buildTable();
      };

      /*Run a function to build the content on the page,
            using the forEach() loop get all the items within the array and add them to the page.
            Include 0 as a default for the vote count, as all individuals should start on zero votes.*/

      function buildTable() {
        /*Create a main function that will create the page elements,
        starting with the parent table row, tr. Then create three table cell, td, elements.*/
        let table = "<table>";
        myArray.forEach((name, index, voteCount) => {
          /*Add content to the table cells, including the vote count in the last column,
          the person name in the middle, and the index plus 1 in the first column.*/
          table += `<tr class="box"  data-name=${name} data-row="${
            index + 1
          }" data-count="${voteCount}"><td >${index + 1}</td>`;
          table += `<td>${name}</td>`;
          table += `<td id="voteCount">0</td></tr>`;
          table += "</table>";
          /*Append the table cells to the table row and append the table row to the output area on the page*/
          output.innerHTML = table;
          let rows = document.querySelector("tr");
          //Add an event listener that will increase the vote counter for that row when the user clicks.
          /*Get the text content from the last column in the row.
          It should be the value of the current counter.
          Increment the counter by one and make sure the datatype is a number so you can add to it.
          */
          rows.onclick = () => {
            let val = Number(rows.lastChild.textContent);
            val++;
            //9. Update the last column with the new click counter
            rows.lastChild.textContent = val;
          };
          output.appendChild(rows);
        });
      }
    </script>
  </body>
</html>
