<!DOCTYPE html>
<html>
  <head>
    <title>Canvas HTML5</title>
    <style>
      #canvas {
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="600" height="400"></canvas>
    <div>
      <button class="save">Save</button>
      <button class="clear">clear</button>
      <span>Color: <input type="color" value="#ffff00" id="penColor" /></span>
      <span
        >Width: <input type="range" min="1" max="20" value="10" id="penWidth"
      /></span>
    </div>
    <div class="output"></div>
    <script>
      const canvas = document.getElementById("canvas");
      let ctx = canvas.getContext("h2");
      let saveBtn = document.querySelector(".save");
      let clearBtn = document.querySelector(".clear");
      let colorAdj = document.querySelector("#penColor");
      let widthAdj = document.querySelector("#penWidth");
      console.log(canvas);
      console.log(saveBtn);
      console.log(clearBtn);

      //Set a variable to track the location of the pen.
      const penPosi = {
        draw: false,
        x: 0,
        y: 0,
        lastX: 0,
        lastY: 0,
      };

      /*On the canvas, add an event listener to track mouse movement.
      Update the pen position to the lastX and lastY positions,
      and then set the location position to clientX and clientY. */

      canvas.addEventListener("mousemove", (e) => {
        penPosi.lastX = penPosi.x;
        penPosi.lastY = penPosi.y;

        penPosi.x = e.clientX;
        penPosi.y = e.clientY;

        //Create a function to draw at the pen position and invoke the draw function.
        drawing();
      });

      //For mousedown, set draw to true, and for mouseup and mouseout, set draw to false
      canvas.addEventListener("mousedown", (e) => {
        penPosi.draw = true;
      });
      canvas.addEventListener("mouseup", (e) => {
        penPosi.draw = false;
      });
      canvas.addEventListener("mouseout", (e) => {
        penPosi.draw = false;
      });

      /*Add an event listener to the clear button.*/
      clearBtn.addEventListener("click", clearCanvas);
      /*If clicked, create a function that confirms that the user wants to remove and clear the drawing, 
      and then if true, invoke clearRect() to clear the canvas contents.*/
      function clearCanvas() {
        let temp = confirm("Clear Canvas?");
        if (temp) {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }

      /*Create a function to draw at the pen position*/
      /*Within the draw function, begin the move path at the pen location values 
      and set the stroke style to the pen color and stroke width to the pen width*/
      function drawing() {
        if (penPosi.draw) {
          ctx.beginPath();
          ctx.moveTo(penPosi.lastX, penPosi.lastY);
          ctx.lineTo(penPosi.x, penPosi.y);
          ctx.strokeStyle = penColor.value;
          ctx.lineWidth = penWidth.value;
        }
        /*These can be changed by clicking the inputs and updating their HTML values. 
        Add the stroke and close the drawing path.*/
        ctx.stroke();
        ctx.closePath();
      }
    </script>
  </body>
</html>
